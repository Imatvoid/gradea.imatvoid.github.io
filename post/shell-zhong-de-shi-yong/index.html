<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" >

<title>Shell中() 、(())、[]、[[]]、{}的使用 | Imatvoid </title>
<meta name="description" content="未曾清贫难成人，不经打击老天真。 &lt;/br&gt;
自古英雄出炼狱，从来富贵入凡尘。 ">

<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<link rel="shortcut icon" href="https://imatvoid.github.io//favicon.ico?v=1564929610983">

<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.2/css/all.css" integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr" crossorigin="anonymous">
<link rel="stylesheet" href="https://unpkg.com/papercss@1.6.1/dist/paper.min.css" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.css">
<link rel="stylesheet" href="https://imatvoid.github.io//styles/main.css">


  
    <link rel="stylesheet" href="https://unpkg.com/gitalk/dist/gitalk.css" />
  

  

<script src="https://cdn.bootcss.com/highlight.js/9.12.0/highlight.min.js"></script>


<link rel="stylesheet" href="https://unpkg.com/aos@next/dist/aos.css" />


  </head>
  <body>
  
    <nav class="navbar border fixed split-nav">
  <div class="nav-brand">
    <h3><a href="https://imatvoid.github.io/">Imatvoid </a></h3>
  </div>
  <div class="collapsible">
    <input id="collapsible1" type="checkbox" name="collapsible1">
    <button>
      <label for="collapsible1">
        <div class="bar1"></div>
        <div class="bar2"></div>
        <div class="bar3"></div>
      </label>
    </button>
    <div class="collapsible-body">
      <ul class="inline">
        
          <li>
            
              <a href="https://imatvoid.github.io/" class="menu">
                首页
              </a>
            
          </li>
        
          <li>
            
              <a href="https://imatvoid.github.io//archives" class="menu">
                归档
              </a>
            
          </li>
        
          <li>
            
              <a href="https://imatvoid.github.io//tags" class="menu">
                标签
              </a>
            
          </li>
        
          <li>
            
              <a href="https://imatvoid.github.io//post/about/" class="menu">
                关于
              </a>
            
          </li>
        
      </ul>
    </div>
  </div>
</nav>

    <div id="top" class="row site">
      <div class="sm-12 md-8 col">
        <div class="paper">
          <article class="article">
            <h1>Shell中() 、(())、[]、[[]]、{}的使用</h1>
            <p class="article-meta">
              2018-10-04
              
                <a href="https://imatvoid.github.io//tag/mPGI5CoLF" class="badge success">
                  shell
                </a>
              
            </p>
            
            <div class="post-content">
              <!-- more -->
<h2 id="的用法">() 的用法</h2>
<h3 id="子shell">子shell</h3>
<p>()开启子shell,外层不受影响</p>
<pre><code class="language-shell">
#!/bin/bash
pwd
(cd /etc;pwd)
pwd
</code></pre>
<p>输出:<br>
/home/atvoid/文档/我的坚果云/project/ShellLife<br>
/etc<br>
/home/atvoid/文档/我的坚果云/project/ShellLife</p>
<h3 id="执行命令">执行命令$()</h3>
<p>等同于``,但是推荐使用$()</p>
<pre><code class="language-shell">a=$(echo 123)
echo $a
</code></pre>
<h3 id="初始化数组字典">初始化数组/字典</h3>
<pre><code class="language-shell">#!/bin/bash
array=(a b c d)
echo ${array[*]}

declare  -A dict=([k1]=&quot;v1&quot; [k2]=&quot;v2&quot;)
echo ${dict[*]}
</code></pre>
<p>输出<br>
a b c d<br>
v1 v2</p>
<h2 id="的用法-2">[]的用法</h2>
<h3 id="内部符号-等同-test-不常用">内部符号 等同 test   不常用</h3>
<p>Test和[]中可用的比较运算符只有==和!=，两者都是用于字符串比较的，不可用于整数比较，整数比较只能使用-eq，-gt这种形式。无论是字符串比较还是整数比较都不支持大于号小于号,如果实在想用，对于字符串比较可以使用转义形式，如果比较&quot;ab&quot;和&quot;bc&quot;：[ ab &lt; bc ]，结果为真.<br>
[ ]中的逻辑与和逻辑或使用-a 和-o 表示<br>
注意:</p>
<ol>
<li>你必须在左括号的右侧和右括号的左侧各加一个空格，否则会报错。</li>
<li>test命令使用标准的数学比较符号来表示字符串的比较，而用文本符号来表示数值的比较。很多人会记反了。使用反了，shell可能得不到正确的结果。</li>
<li>大于符号或小于符号必须要转义，否则会被理解成重定向。</li>
</ol>
<pre><code class="language-shell">#!/bin/bash
a=1
b=2
if [ $a -lt $b ]; then
  echo a小于b
fi

a=&quot;a&quot;
b=&quot;b&quot;
if [ $a != $b ]; then
  echo a不等于b
fi
</code></pre>
<h3 id="其他">其他</h3>
<p>引用数组元素  array[1]<br>
正则   [0-9]</p>
<h2 id="及-常用">(( ))及[[ ]]  常用</h2>
<p>它们分别是[ ]的针对数学比较表达式和字符串表达式的加强版。<br>
其中(( ))，不需要再将表达式里面的大小于符号转义，除了可以使用标准的数学运算符外，还增加了以下符号:<br>
<img src="https://imatvoid.github.io//post-images/1564911219372.png" alt=""><br>
在 [[ ]]中增加了另一个特性：模式匹配</p>
<h3 id="和">(()) 和 $(())</h3>
<ol>
<li>整数扩展.这种扩展计算是整数型的计算,不支持浮点型。<code>((exp))</code>结构扩展并计算一个算术表达式的值,如果表达式的结果为0,那么返回的退出状态码为1,或者 是&quot;假&quot;,而一个非零值的表达式所返回的退出状态码将为0，或者是&quot;true&quot;.若是逻辑判断,表达式exp为真则为1,假则为0.</li>
<li>只要括号中的运算符、表达式符合C语言运算规则，都可用<code>在$((exp))</code>中，甚至是三目运算符。作不同进位(如二进制、八进制、十六进制)运算时，输出结果全都自动转化成了十进制。如：<code>echo $((16#5f))</code> 结果为95 (16进位转十进制)</li>
<li>单纯用<code>(( ))</code> 也可重定义变量值，比如<code>a=5; ((a++))</code>可将 $a 重定义为6</li>
<li>常用于算术运算比较，双括号中的变量可以不使用<code>$</code>符号前缀。括号内支持多个表达式用逗号分开。 只要括号中的表达式符合C语言运算规则,比如可以直接使用<code>for((i=0;i&lt;5;i++))</code>, 如果不使用双括号, 则为<code>for i in $(seq 0 4)</code>或者<code>for i in {0..4}</code>。再如可以直接使用<code>if (($i&lt;5))</code>, 如果不使用双括号, 则为<code>if [ $i -lt 5 ]</code>。1. <code>[[</code>是 bash 程序语言的关键字。并不是一个命令，<code>[[ ]]</code>结构比<code>[ ]</code>结构更加通用。在[[和]]之间所有的字符都不会发生文件名扩展或者单词分割，但是会发生参数扩展和命令替换。</li>
<li>支持字符串的模式匹配，使用=~操作符时甚至支持shell的正则表达式。字符串比较时可以把右边的作为一个模式，而不仅仅是一个字符串，比<code>如[[ hello == hell? ]]</code>，结果为真。<code>[[ ]]</code> 中匹配字符串或通配符，不需要引号。</li>
<li>使用<code>[[ ... ]]</code>条件判断结构，而不是<code>[ ... ]</code>，能够防止脚本中的许多逻辑错误。比如，&amp;&amp;、||、&lt;和&gt; 操作符能够正常存在于<code>[[ ]]</code>条件判断结构中，但是如果出现在<code>[ ]</code>结构中的话，会报错。比如可以直接使用<code>if [[ $a != 1 &amp;&amp; $a != 2 ]]</code>, 如果不使用双括号, 则为<code>if [ $a -ne 1] &amp;&amp; [ $a != 2 ]</code>或者<code>if [ $a -ne 1 -a $a != 2 ]</code>。</li>
<li>bash把双中括号中的表达式看作一个单独的元素，并返回一个退出状态码。</li>
</ol>
<pre><code class="language-shell">#!/bin/bash
#重新定义变量
a=5
((a++))
echo $a # 输出6

#for循环
for ((i = 0; i &lt; 5; i++)); do
  echo 当前序号: $i
done

#条件判断
if ((1 + 2)); then
  echo 真
fi`#`是去掉左边(在键盘上`#`在`$`之左边)   
`%`是去掉右边(在键盘上`%`在`$`之右边)  
`#`和`%`中的单一符号是最小匹配，两个相同符号是最大匹配。  

if !((1 - 1)); then
  echo 假
fi

#算数运算
echo $((1 + 2 * 3)) # 输出7
</code></pre>
<h3 id="">[[]]</h3>
<ol>
<li>[[是 bash 程序语言的关键字。并不是一个命令，[[ ]] 结构比[ ]结构更加通用。在[[和]]之间所有的字符都不会发生文件名扩展或者单词分割，但是会发生参数扩展和命令替换。</li>
<li>支持字符串的模式匹配，使用=~操作符时甚至支持shell的正则表达式。字符串比较时可以把右边的作为一个模式，而不仅仅是一个字符串，比如[[ hello == hell? ]]，结果为真。[[ ]] 中匹配字符串或通配符，不需要引号。</li>
<li>使用[[ ... ]]条件判断结构，而不是[ ... ]，能够防止脚本中的许多逻辑错误。比如，&amp;&amp;、||、&lt;和&gt; 操作符能够正常存在于[[ ]]条件判断结构中，但是如果出现在[ ]结构中的话，会报错。比如可以直接使用if [[ $a != 1 &amp;&amp; $a != 2 ]], 如果不使用双括号, 则为if [ $a -ne 1] &amp;&amp; [ $a != 2 ]或者if [ $a -ne 1 -a $a != 2 ]。</li>
<li>bash把双中括号中的表达式看作一个单独的元素，并返回一个退出状态码。</li>
</ol>
<pre><code class="language-shell">#!/bin/bash
if [[ hello == hell? ]];then
  echo 'hello == hell?  true'
fi

if [[ 5 &gt; 4 ]];then
  echo '5 &gt; 4 true'
fi


if [[ 123 =~ ^[0-9]+ ]];then
  echo '123 match ^[0-9]+'
fi

</code></pre>
<h2 id="的用法-3">{}的用法</h2>
<h3 id="变量替换">变量替换${}</h3>
<pre><code class="language-shell">#!/bin/bash
array=(a b c d)
#  echo $array[*]   会输出a[*]
echo ${array[*]} # 可以输出a b c d
</code></pre>
<h3 id="特殊替换">特殊替换</h3>
<ul>
<li><code>${var:-string}/${var:=string}</code><br>
若变量var为空，则用在命令行中用string来替换<code>${var:-string}</code>,否则变量var不为空时，则用变量var的值来替换<code>${var:-string}</code>；对于<code>${var:=string}</code>的替换规则和<code>${var:-string}</code>是一样的，所不同之处是<code>${var:=string}</code>若var为空时，用string替换<code>${var:=string}</code>的同时，把string赋给变量var.    <code>${var:=string}</code>很常用的一种用法是，判断某个变量是否赋值，没有的话则给它赋上一个默认值。</li>
<li><code>${var:+string}</code><br>
与上面相反,即只有当var不是空的时候才替换成string，若var为空时则不替换或者说是替换成变量 var的值，即空值。(因为变量var此时为空，所以这两种说法是等价的)</li>
<li><code>${var:?string}</code><br>
若变量var不为空，则用变量var的值来替换<code>${var:?string}</code>；若变量var为空，则把string输出到标准错误中，并从脚本中退出。我们可利用此特性来检查是否设置了变量的值。</li>
</ul>
<h3 id="字符串提取和替换">字符串提取和替换</h3>
<ul>
<li><code>${var:num}</code><br>
从num开始到结尾,0计数</li>
<li><code>${var:num1:num2}</code><br>
从num1开始,提取num2个,0计数</li>
<li><code>${var/pattern/pattern}</code><br>
替换第一个</li>
<li><code>${var//pattern/pattern}</code><br>
全部替换</li>
</ul>
<pre><code class="language-shell">var=&quot;01234560&quot;
echo $var #01234560

echo ${var:5} #560

echo ${var: -6} #234560

echo ${var:(-6)} #234560

echo ${var:1:4} #1234

echo ${var/0/-1} #-11234560

echo ${var//0/-1} #-1123456-1
</code></pre>
<h3 id="四种模式匹配替换结构">四种模式匹配替换结构</h3>
<p><code>#</code>是去掉左边(在键盘上<code>#</code>在<code>$</code>之左边)<br>
<code>%</code>是去掉右边(在键盘上<code>%</code>在<code>$</code>之右边)<br>
<code>#</code>和<code>%</code>中的单一符号是最小匹配，两个相同符号是最大匹配。</p>
<ul>
<li><code>${var#pattern}</code><br>
${variable#pattern} 这种模式时，shell在variable中查找，看它是否一给的模式pattern开始，如果是，就从命令行把variable中的内容去掉左边最短的匹配模式</li>
<li><code>${var##pattern}</code><br>
${variable##pattern} 这种模式时，shell在variable中查找，看它是否一给的模式pattern结尾，如果是，就从命令行把variable中的内容去掉右边最长的匹配模式</li>
<li><code>${var%pattern}</code><br>
${variable%pattern}，这种模式时，shell在variable中查找，看它是否一给的模式pattern结尾，如果是，就从命令行把variable中的内容去掉右边最短的匹配模式</li>
<li><code>${var%%pattern}</code><br>
${variable%%pattern}，这种模式时，shell在variable中查找，看它是否一给的模式pattern结尾，如果是，就从命令行把variable中的内容去掉右边最长的匹配模式</li>
</ul>
<pre><code class="language-shell">var=testcase
echo $var  #testcase
echo ${var%s*e} #testca

echo ${var%%s*e} #te

echo ${var#?e} #stcase
echo ${var##?e}#stcase

echo ${var##*e} #空
echo ${var##*s} #e
echo ${var##test} #case

</code></pre>
<h3 id="表示范围">表示范围</h3>
<p>touch {a..d}.txt 结果为a.txt b.txt c.txt d.txt</p>

            </div>
          </article>
        </div>
        <div class="paper" data-aos="fade-in">
          
            <div class="next-post">
              <div class="next">
                下一篇
              </div>
              <a href="https://imatvoid.github.io//post/leetcode-445-add-two-numbers-ii">
                <h3 class="post-title">
                  leetcode -- 445. Add Two Numbers II
                </h3>
              </a>
            </div>
          
        </div>
        
          
            <div class="paper" data-aos="fade-in">
              <div id="gitalk-container"></div>
            </div>
          

          
        
      </div>

      <div class="sm-12 md-4 col sidebar">
  <div class="paper info-container">
    <img src="https://imatvoid.github.io//images/avatar.png?v=1564929610983" class="no-responsive avatar">
    <div class="text-muted">未曾清贫难成人，不经打击老天真。 </br>
自古英雄出炼狱，从来富贵入凡尘。 </div>
    <div class="social-container">
      
        
      
        
      
        
      
        
      
        
      
    </div>
  </div>
  <div class="paper">
    <div class="sidebar-title">
      最新文章
    </div>
    <div class="row">
      <ul>
        
          
            <li>
              <a href="https://imatvoid.github.io//post/leetcode-ru-he-sheng-cheng-duan-lian-jie">leetcode -- 如何生成短链接</a>
            </li>
          
        
          
            <li>
              <a href="https://imatvoid.github.io//post/ru-he-zhi-shi-yong-xin-hao-liang-tong-guo-leetcode-de-duo-xian-cheng-ti-mu">如何只使用信号量通过leetcode的多线程题目</a>
            </li>
          
        
          
            <li>
              <a href="https://imatvoid.github.io//post/leetcode-1117-building-h2o">leetcode -- 1117. Building H2O</a>
            </li>
          
        
          
            <li>
              <a href="https://imatvoid.github.io//post/1116-print-zero-even-odd">leetcode -- 1116. Print Zero Even Odd</a>
            </li>
          
        
          
            <li>
              <a href="https://imatvoid.github.io//post/leetcode-1114-print-in-order">leetcode -- 1114. Print in Order</a>
            </li>
          
        
          
            <li>
              <a href="https://imatvoid.github.io//post/1115-print-foobar-alternately">leetcode -- 1115. Print FooBar Alternately</a>
            </li>
          
        
          
            <li>
              <a href="https://imatvoid.github.io//post/leetcode-938-range-sum-of-bst">leetcode -- 938. Range Sum of BST</a>
            </li>
          
        
          
            <li>
              <a href="https://imatvoid.github.io//post/fan-xing-yu-pecs-yuan-ze">泛型与PECS原则</a>
            </li>
          
        
          
            <li>
              <a href="https://imatvoid.github.io//post/qing-ping-gu-yi-xia-cheng-xu-de-zhi-xing-jie-guo">请评估一下程序的执行结果?</a>
            </li>
          
        
          
            <li>
              <a href="https://imatvoid.github.io//post/lru-huan-cun-ji-zhi">LRU 缓存机制</a>
            </li>
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
      </ul>
    </div>
  </div>
  <div class="paper">
    <div class="sidebar-title">
      标签列表
    </div>
    <div class="row">
      
        <a href="https://imatvoid.github.io//tag/AQAWGqk29" class="badge secondary">
          System Design
        </a>
      
        <a href="https://imatvoid.github.io//tag/cz4gD6pYd" class="badge secondary">
          leetcode-design
        </a>
      
        <a href="https://imatvoid.github.io//tag/Nxc6J5Kg9" class="badge success">
          leetcode
        </a>
      
        <a href="https://imatvoid.github.io//tag/jewXpk0In" class="badge ">
          并发concurrency
        </a>
      
        <a href="https://imatvoid.github.io//tag/N14GFPbLq" class="badge success">
          leetcode-并发
        </a>
      
        <a href="https://imatvoid.github.io//tag/vWzpbm4an" class="badge ">
          Binary Tree
        </a>
      
        <a href="https://imatvoid.github.io//tag/e7w16IVcO" class="badge secondary">
          Binary Search Tree
        </a>
      
        <a href="https://imatvoid.github.io//tag/e8EfKntpt" class="badge success">
          面试
        </a>
      
        <a href="https://imatvoid.github.io//tag/hcAr2mEWi" class="badge secondary">
          alibaba
        </a>
      
        <a href="https://imatvoid.github.io//tag/41zWzzRyW" class="badge secondary">
          leetcode-add
        </a>
      
        <a href="https://imatvoid.github.io//tag/E3CtpWrEV" class="badge secondary">
          java
        </a>
      
        <a href="https://imatvoid.github.io//tag/DfY45no84" class="badge warning">
          leetcode-math
        </a>
      
        <a href="https://imatvoid.github.io//tag/mPGI5CoLF" class="badge warning">
          shell
        </a>
      
        <a href="https://imatvoid.github.io//tag/2EwFaHY0f" class="badge success">
          leetcode-linkedlist
        </a>
      
        <a href="https://imatvoid.github.io//tag/FEI4krcFr" class="badge secondary">
          mysql
        </a>
      
        <a href="https://imatvoid.github.io//tag/M7w8kiM4m" class="badge ">
          数据库
        </a>
      
        <a href="https://imatvoid.github.io//tag/hGWLocgz4" class="badge ">
          设计模式
        </a>
      
        <a href="https://imatvoid.github.io//tag/KUMZwPCyy" class="badge warning">
          maven
        </a>
      
        <a href="https://imatvoid.github.io//tag/e9NKSV4ZO" class="badge secondary">
          java集合
        </a>
      
    </div>
  </div>
  <div class="paper">
    Powered by <a href="https://github.com/getgridea/gridea" target="_blank">Gridea</a> | <a class="rss" href="https://imatvoid.github.io//atom.xml" target="_blank">RSS</a>
  </div>
</div>


    </div>

    <script src="https://unpkg.com/aos@next/dist/aos.js"></script>

<script type="application/javascript">

AOS.init();

hljs.initHighlightingOnLoad()

</script>



  
    <script src="https://unpkg.com/gitalk/dist/gitalk.min.js"></script>
    <script>

      var gitalk = new Gitalk({
        clientID: 'd6f8edd37708580f1f7e',
        clientSecret: 'd0b6a8d54d73512cc1e86256bfd778b4753e6b6c',
        repo: 'imatvoid.github.io',
        owner: 'Imatvoid',
        admin: ['Imatvoid'],
        id: (location.pathname).substring(0, 49),      // Ensure uniqueness and length less than 50
        distractionFreeMode: false  // Facebook-like distraction free mode
      })

      gitalk.render('gitalk-container')

    </script>
  

  




  </body>
</html>
